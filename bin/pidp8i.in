#!/bin/sh
if [ "$USER" != "@INSTUSR@" ] ; then exec su -c "$0" @INSTUSR@ ; fi

procs=`screen -ls pidp8i | egrep '[0-9]+\.pidp8i' | wc -l`
if [ $procs -ne 0 ]; then
	echo Joining simulator session already in progress...
	screen -r
else
	cat <<ERROR
Either the simulator isn't running, or it isn't running under a screen(1)
session owned by @INSTUSR@.  Did you start it via the init script?

ERROR
fi
